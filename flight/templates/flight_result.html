{% extends 'base.html' %}
{% load custom_filters %}
{% load mathfilters %}
{% comment %} head {% endcomment %}
{% block head %}
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.14/css/bootstrap-select.min.css">

    <style>
        .fixed-bottom-div {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 10%;
            background-color: #fff;
            box-shadow: 0px -5px 10px rgba(0, 0, 0, 0.1);
            z-index: 999;
            /* display: none; */
        }
        .airport-list {
            position: absolute;
            width: 100%;
            left: 0px;
            max-height: 150px;
            /* Adjust the maximum height as needed */
            overflow-y: auto;
            background-color: #ffffff;
            border: 1px solid rgba(113, 103, 255, .15);
            border-top: none;
            border-bottom-left-radius: 4px;
            border-bottom-right-radius: 4px;
            cursor: pointer;
            z-index: 999;
        }
        .airport-item {
            padding: 8px 12px;
            cursor: pointer;
        }
        .airport-item:hover {
            background-color: #f5f5f5;
        }
        .flex{
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        #loader-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7); /* Semi-transparent gray background */
            z-index: 1000; /* Ensure it's above other content */
        }
        .width {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .styled {
            display: none;
            position: fixed;
            top: 50px;
            right: 20px; 
            z-index: 999;
            border: 0;
            line-height: 2.5;
            padding: 0 20px;
            font-size: 1rem;
            text-align: center;
            color: #fff;
            text-shadow: 1px 1px 1px #000;
            border-radius: 10px;
            background-color: rgba(220, 0, 0, 1);
            background-image: linear-gradient(to top left, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2) 30%, rgba(0, 0, 0, 0));
            box-shadow:
              inset 2px 2px 3px rgba(255, 255, 255, 0.6),
              inset -2px -2px 3px rgba(0, 0, 0, 0.6);
          }
          
          .styled:hover {
            background-color: rgba(255, 0, 0, 1);
          }
          
          .styled:active {
            box-shadow:
              inset -2px -2px 3px rgba(255, 255, 255, 0.6),
              inset 2px 2px 3px rgba(0, 0, 0, 0.6);
          }

          @media (max-width: 990px) {
            .styled {
                display: block;
            }
        }
    </style>
{% endblock head %}
{% load static %}
{% block body %}


<div id="loader-container">
    <div class="loader width">
        <span style="--i:1;"></span>
        <span style="--i:2;"></span>
        <span style="--i:3;"></span>
        <span style="--i:4;"></span>
        <span style="--i:5;"></span>
        <span style="--i:6;"></span>
        <span style="--i:7;"></span>
        <span style="--i:8;"></span>
        <span style="--i:9;"></span>
        <span style="--i:10;"></span>
        <span style="--i:11;"></span>
        <span style="--i:12;"></span>
        <span style="--i:13;"></span>
        <span style="--i:14;"></span>
        <span style="--i:15;"></span>
        <span style="--i:16;"></span>
        <span style="--i:17;"></span>
        <span style="--i:18;"></span>
        <span style="--i:19;"></span>
        <span style="--i:20;"></span>
        <div class="loader-plane"></div>
    </div>
</div>

<main class="main">

    <!-- breadcrumb -->
    <div class="site-breadcrumb" style="background: url({% static 'assets/img/breadcrumb/01.jpg' %})">
    </div>

    <!-- search area -->
    <div class="search-area">
        <div class="container">
            <div class="search-wrapper">
                <!-- flight search -->
                <div class="search-box flight-search">
                    <div class="search-form">
                        <form action="{% url 'flight_result' %}" method="post">
                            {% csrf_token %}
                            <!-- flight type -->
                            <div class="flight-type">
                                {% if flight_type == 'O' %}
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" checked value="one-way"
                                        name="flight-type" id="flight-type1">
                                    <label class="form-check-label" for="flight-type1">
                                        One Way
                                    </label>
                                    {% if error_message %}
                                    <div class="error-message">
                                        {{ error_message }}
                                    </div>
                                    {% endif %}
                                </div>
                                {% endif %}

                                {% if flight_type == 'R' %}
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" checked value="round-way" name="flight-type"
                                        id="flight-type2">
                                    <label class="form-check-label" for="flight-type2">
                                        Round Way
                                    </label>
                                </div>
                                {% endif %} 

                            </div>
                            <!-- flight type end -->

                            <!-- flight search -->
                            <div class="flight-search-wrapper">
                                <div class="flight-search-content">
                                    <!-- flight search content -->
                                    <div class="flight-search-item">
                                        <div class="row">


                                            <div class="col-lg-3">
                                                <div class="form-group">
                                                    <label>From</label>
                                                    <div class="form-group-icon">
                                                        <input id="departureSearch" type="text" name="from-destination"
                                                            class="form-control swap-from"
                                                            placeholder="Enter departure city" autocomplete="off"
                                                            value="{{DepartureStation}}">
                                                        <i class="fal fa-plane-departure"></i>
                                                    </div>
                                                    <p class="airport__paragraph" id="selectedDepartureAirport">
                                                        Selected Airport</p>
                                                    <div id="departureAirportList" class="airport-list"></div>
                                                </div>
                                            </div>


                                            <div class="col-lg-3">
                                                <div class="form-group">
                                                    <label>To</label>
                                                    <div class="form-group-icon">
                                                        <input id="arrivalSearch" type="text" name="to-destination"
                                                            class="form-control swap-from"
                                                            placeholder="Enter arrival city" autocomplete="off"
                                                            value="{{ArrivalStation}}">
                                                        <i class="fal fa-plane-arrival"></i>
                                                    </div>
                                                    <p class="airport__paragraph" id="selectedArrivalAirport">Selected Airport</p>
                                                    <div id="arrivalAirportList" class="airport-list"></div>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-group">
                                                    <div class="search-form-date">
                                                        <div class="search-form-journey">
                                                            <label>Journey Date</label>
                                                            <div class="form-group-icon">
                                                                <input type="text" name="journey-date"
                                                                    class="form-control date-picker journey-date">
                                                                <i class="fal fa-calendar-days"></i>
                                                            </div>
                                                            <p class="journey-day-name"></p>
                                                        </div>

                                                        {% if flight_type == 'R' %}
                                                        <div class="search-form-return1">
                                                            <label>Return Date</label>
                                                            <div class="form-group-icon">
                                                                <input type="text" name="return-date"
                                                                    class="form-control date-picker return-date">
                                                            </div>
                                                            <p class="return-day-name"></p>
                                                        </div>
                                                        {% endif %}

                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-group dropdown passenger-box">
                                                    <div class="passenger-class" role="menu" data-bs-toggle="dropdown"
                                                        aria-expanded="false">
                                                        <label>Passenger, Class</label>
                                                        <div class="form-group-icon">
                                                            <div class="passenger-total"><span
                                                                    class="passenger-total-amount">{{totalpassengers}}</span>
                                                                Passenger
                                                            </div>
                                                            <i class="fal fa-user-plus"></i>
                                                        </div>
                                                        <p class="passenger-class-name">{% if FarecabinOption == 'E' %}Economy{% elif FarecabinOption == 'B' %}Business{% elif FarecabinOption == 'F' %}First Class{% endif %}</p>
                                                    </div>
                                                    <div class="dropdown-menu dropdown-menu-end">
                                                        <div class="dropdown-item">
                                                            <div class="passenger-item">
                                                                <div class="passenger-info">
                                                                    <h6>Adults</h6>
                                                                    <p>12+ Years</p>
                                                                </div>
                                                                <div class="passenger-qty">
                                                                    <button type="button" class="minus-btn"><i
                                                                            class="far fa-minus"></i></button>
                                                                    <input type="text" name="adult"
                                                                        class="qty-amount passenger-adult" value="{{adult}}"
                                                                        readonly>
                                                                    <button type="button" class="plus-btn"><i
                                                                            class="far fa-plus"></i></button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="dropdown-item">
                                                            <div class="passenger-item">
                                                                <div class="passenger-info">
                                                                    <h6>Children</h6>
                                                                    <p>2-12 Years</p>
                                                                </div>
                                                                <div class="passenger-qty">
                                                                    <button type="button" class="minus-btn"><i
                                                                            class="far fa-minus"></i></button>
                                                                    <input type="text" name="children"
                                                                        class="qty-amount passenger-children" value="{{children}}"
                                                                        readonly>
                                                                    <button type="button" class="plus-btn"><i
                                                                            class="far fa-plus"></i></button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="dropdown-item">
                                                            <div class="passenger-item">
                                                                <div class="passenger-info">
                                                                    <h6>Infant</h6>
                                                                    <p>Below 2 Years</p>
                                                                </div>
                                                                <div class="passenger-qty">
                                                                    <button type="button" class="minus-btn"><i
                                                                            class="far fa-minus"></i></button>
                                                                    <input type="text" name="infant"
                                                                        class="qty-amount passenger-infant" value="{{infant}}"
                                                                        readonly>
                                                                    <button type="button" class="plus-btn"><i
                                                                            class="far fa-plus"></i></button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="dropdown-item">
                                                            <h6 class="mb-3 mt-2">Cabin Class</h6>
                                                            <div class="passenger-class-info">
                                                                <div class="form-check">
                                                                    <input class="form-check-input" type="radio"
                                                                        value="Economy" {% if FarecabinOption == 'E' %}checked{% endif %} name="cabin-class"
                                                                        id="cabin-class1">
                                                                    <label class="form-check-label" for="cabin-class1">
                                                                        Economy
                                                                    </label>
                                                                </div>
                                                                <div class="form-check">
                                                                    <input class="form-check-input" {% if FarecabinOption == 'B' %}checked{% endif %}  type="radio"
                                                                        value="Business" name="cabin-class"
                                                                        id="cabin-class2">
                                                                    <label class="form-check-label" for="cabin-class2">
                                                                        Business
                                                                    </label>
                                                                </div>
                                                                <div class="form-check">
                                                                    <input class="form-check-input" type="radio"
                                                                        value="First Class" {% if FarecabinOption == 'F' %}checked{% endif %} name="cabin-class"
                                                                        id="cabin-class3">
                                                                    <label class="form-check-label" for="cabin-class3">
                                                                        First Class
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- flight search content end -->
                                </div>
                                <div class="search-btn">
                                    <button type="submit" class="theme-btn"><span class="far fa-search"></span>Modified
                                        Search
                                    </button>
                                </div>
                            </div>
                            <!-- flight search end -->
                        </form>
                    </div>
                </div>
                <!-- flight search end -->
            </div>
        </div>
    </div>
    <!-- search area end -->

    <!-- flight booking -->
    {% if flight_type == 'O' %}
    <div class="flight-booking flight-list py-120">
        <div class="container">
            <div class="row">
                <!-- booking sidebar -->
                <div class="col-lg-4 col-xl-3 mb-4">
                    <div class="booking-sidebar">

                        <div class="booking-item">
                            <h4 class="booking-title">Flight Price</h4>
                            <div class="flight-price">
                                <div class="price-range-slider">
                                    <div class="price-range-info">
                                        <label for="priceRange1">Price:</label>
                                        <input type="text" class="priceRange" id="priceRange1" readonly>
                                    </div>
                                    <div id="price-range1" class="price-range slider"></div>
                                </div>
                            </div>
                        </div>

                        <div class="booking-item">
                            <h4 class="booking-title">Flight Time</h4>
                            <div class="flight-time">
                                <div class="form-check">
                                    <input class="form-check-input" name="flight-time" type="checkbox" value="1"
                                        id="flight-time1">
                                    <label class="form-check-label timeid" for="flight-time1">
                                        <i class="far fa-sunrise"></i> 00:00 - 05:59 <span></span>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" name="flight-time" type="checkbox" value="2"
                                        id="flight-time2">
                                    <label class="form-check-label timeid" for="flight-time2">
                                        <i class="far fa-sun-bright"></i> 06:00 - 11:59 <span></span>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" name="flight-time" type="checkbox" value="3"
                                        id="flight-time3">
                                    <label class="form-check-label timeid" for="flight-time3">
                                        <i class="far fa-sunset"></i> 12:00 - 17:59 <span></span>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" name="flight-time" type="checkbox" value="3"
                                        id="flight-time4">
                                    <label class="form-check-label timeid" for="flight-time4">
                                        <i class="far fa-moon-stars"></i> 18:00 - 23:59 <span></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="booking-item">
                            <h4 class="booking-title">Flight Stops</h4>
                            <div class="flight-stop">
                                <div class="form-check">
                                    <input class="form-check-input" name="flight-stop" type="checkbox" value="0"
                                        id="flight-stop1">
                                    <label class="form-check-label" for="flight-stop1">
                                        Non Stop <span></span>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" name="flight-stop" type="checkbox" value="1"
                                        id="flight-stop2">
                                    <label class="form-check-label" for="flight-stop2">
                                        1 Stop <span></span>
                                    </label>
                                </div>
                                
                            </div>
                        </div>
                        <div class="booking-item">
                            <h4 class="booking-title">Airlines</h4>
                            <div class="flight-airline" id="checkbox-container">
                                <!-- flight name filters -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- booking list -->
                <div class="col-lg-8 col-xl-9" id="scroll">
                        <div class="row">

                           <!-- flight booking item -->
                            
                            {% for flight in availabilitycheck_Response.ItineraryFlightList %}                              
                            {% for flight_details in flight.Items %}                                                   
                            <form action="{% url 'flight_pricing' %}" method="post">
                                    {% csrf_token %}   

                                    {% comment %} inputs                     {% endcomment %}
                                    <input type="hidden" name="BaseOrigin" value="{{flight_details.FlightDetails.0.Origin}}">
                                    <input type="hidden" name="BaseDestination" value="{{flight_details.FlightDetails.0.Destination}}">
                                    <input type="hidden" name="TripType" value="{{flight_type}}">
                                    <input type="hidden" name="AdultCount" value="{{adult}}">
                                    <input type="hidden" name="children" value="{{children}}">
                                    <input type="hidden" name="infant" value="{{infant}}">
                                    <input type="hidden" name="FlightID" value="{{flight_details.FlightDetails.0.FlightID}}">
                                    <input type="hidden" name="FlightNumber" value="{{flight_details.FlightDetails.0.FlightNumber}}">
                                    <input type="hidden" name="Origin" value="{{flight_details.FlightDetails.0.Origin}}">
                                    <input type="hidden" name="Destination" value="{{flight_details.FlightDetails.0.Destination}}">
                                    <input type="hidden" name="DepartureDateTime" value="{{flight_details.FlightDetails.0.DepartureDateTime}}">
                                    <input type="hidden" name="ArrivalDateTime" value="{{flight_details.FlightDetails.0.ArrivalDateTime}}">
                                    <input type="hidden" name="Trackid" value="{{availabilitycheck_Response.Trackid}}">
                                    <input type="hidden" name="Stops" value="{{flight_details.FlightDetails.0.Stops}}">




                                    <div class="col-lg-12">
                                        <div class="flight-booking-item">
                                            <div class="flight-booking-wrapper">
                                                <div class="flight-booking-info">

                                                  
                                                    <div class="flight-booking-content">
                                                        <div class="flight-booking-airline">
                                                            <div class="flight-airline-img">
                                                                <img src="https://pic.tripcdn.com/airline_logo/2x/{{ flight_details.FlightDetails.0.Stock|lower }}.webp" alt="{{ flight_details.FlightDetails.0.Stock }}" width="90" height="58">

                                                            </div>
                                                            <h5 class="flight-airline-namee">{{flight_details.FlightDetails.0.Stock}}</h5>
                                                        </div>
                                                        <div class="flight-booking-time">
                                                            <div class="start-time">
                                                                <div class="start-time-icon">
                                                                    <i class="fal fa-plane-departure"></i>
                                                                </div>
                                                                <div class="start-time-info">
                                        
                                                                    <h6 class="start-time-text">{{flight_details.FlightDetails.0.DepartureDateTime|slice:"12:"}}</h6>
                                                                    <span class="flight-destination">{{flight_details.FlightDetails.0.Origin}}</span>
                                                                </div>
                                                            </div>
                                                            <div class="flight-stop">
                                                       
                                                                <span class="flight-stop-number"><span class="filterstp" data-stops="{{ flight_details.FlightDetails.0.Stops }}">
                                                                    {{ flight_details.FlightDetails.0.Stops }}
                                                                </span> Stop</span>
                                                                <div class="flight-stop-arrow"></div>
                                                            </div>
                                                            <div class="end-time">
                                                                <div class="start-time-icon">
                                                                    <i class="fal fa-plane-arrival"></i>
                                                                </div>
                                                                <div class="start-time-info">
                                                            
                                                                    {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                                    <h6 class="end-time-text">{{ flight_details.FlightDetails.1.ArrivalDateTime|slice:"12:" }}</h6>                                           
                                                                    <span class="flight-destination">{{flight_details.FlightDetails.1.Destination}}</span>
                                                                    {% else %}
                                                                    <h6 class="end-time-text">{{ flight_details.FlightDetails.0.ArrivalDateTime|slice:"12:" }}</h6>
                                                                    <span class="flight-destination">{{flight_details.FlightDetails.0.Destination}}</span>

                                                                    {% endif %}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="flight-booking-duration">
                                                            {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                            <span class="duration-text">{{flight_details.FlightDetails.1.JourneyTime|format_time }}</span>
                                                            {% else %}
                                                            <span class="duration-text">{{flight_details.FlightDetails.0.JourneyTime|format_time }}</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                  

                                                </div>
                                                <div class="flight-booking-price">
                                                    <div class="price-info">
                                                        <span class="price-amount">â‚¹{{flight_details.Fares.0.Faredescription.0.BaseAmount|floatformat:2}}</span>
                                                        <span class="discount-price"> -/pax</span>
                                                   </div>
                                                    <a><button class="theme-btn" type="submit">Book Now<i class="far fa-arrow-right"></i></button></a>
                                                    
                                                </div>
                                            </div>
                                            <div class="flight-booking-detail">
                                                <div class="flight-booking-detail-header">
                                                    <p class="flight-airline-name">{{flight_details.FlightDetails.0.Stock}}</p>

                                                    <a title="{{flight_details.FlightDetails.0.AvailSeat}} Seat Left" style="text-decoration: none; color: red; font-size: 20px;">
                                                        <i class="material-icons" style="font-size: 18px; color: black; cursor: pointer;">&#xe903;</i>
                                                    </a>                                                    
                                                    
                                                    <a href="#flight-booking-collapse{{ forloop.counter }}" data-bs-toggle="collapse" role="button"
                                                        aria-expanded="false" aria-controls="flight-booking-collapse1">Flight
                                                        Details <i class="far fa-angle-down"></i></a>
                                                </div>


                                                <div class="collapse" id="flight-booking-collapse{{ forloop.counter }}">
                                                    <div class="flight-booking-detail-wrapper">
                                                        <div class="row">
                                                            <div class="col-lg-12 col-xl-6">
                                                                <div class="flight-booking-detail-left">
                                                                    <ul class="nav nav-tabs" id="flTab1" role="tablist">
                                                                        <li class="nav-item" role="presentation">
                                                                            <button class="nav-link active" id="fl-tab1"
                                                                                data-bs-toggle="tab" data-bs-target="#fl-tab-pane1"
                                                                                type="button" role="tab"
                                                                                aria-controls="fl-tab-pane1"
                                                                                aria-selected="true">{{flight_details.FlightDetails.0.Origin}} - {% if flight_details.FlightDetails.0.Stops == "1" %}{{flight_details.FlightDetails.1.Destination}} {% else %}{{flight_details.FlightDetails.0.Destination}}{% endif %}</button>
                                                                        </li>
                                                                    </ul>
                                                                    <div class="tab-content" id="flTabContent1">
                                                                        <div class="tab-pane fade show active" id="fl-tab-pane1"
                                                                            role="tabpanel" aria-labelledby="fl-tab1" tabindex="0">
                                                                            <div class="flight-booking-detail-info">
                                                                                <div class="flight-booking-airline">
                                                                                    <div class="flight-airline-img">
                                                                                        <img src="https://pic.tripcdn.com/airline_logo/2x/{{ flight_details.FlightDetails.0.Stock|lower }}.webp" alt="{{ flight_details.FlightDetails.0.Stock }}" width="90" height="58">
                                                                                    </div>
                                                                                    <div class="flight-airline-info flex-grow-1">
                                                                                        <h5 class="flight-airline-name">{{flight_details.FlightDetails.0.Stock}}</h5>
                                                                                          
                                                                                        <span class="flight-airline-model">{{flight_details.FlightDetails.0.FlightNumber}}</span>
                                                                                    </div>
                                                                                    
                                                                                    <p class="flight-airline-class">( {% if FarecabinOption == 'E' %}Economy{% elif FarecabinOption == 'B' %}Business{% elif FarecabinOption == 'F' %}First Class{% endif %} )</p>
                                                                                </div>


                                                                                <div class="flight-booking-time">
                                                                                    <div class="start-time">
                                                                                        <div class="start-time-icon">
                                                                                            <i class="fal fa-plane-departure"></i>
                                                                                        </div>
                                                                                        <div class="start-time-info">
                                                                                            <h6 class="start-time-text">{{flight_details.FlightDetails.0.DepartureDateTime|slice:"12:"}}</h6>
                                                                                            <p class="flight-full-date">{{flight_details.FlightDetails.0.DepartureDateTime|slice:":11"}}</p>
                                                                                            <span
                                                                                                class="flight-destination">{{flight_details.FlightDetails.0.Origin}}</span>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="flight-stop">
                                                                                    
                                                                                        <div class="flight-stop-arrow"></div>
                                                                                        
                                                                                    </div>
                                                                                    <div class="end-time">
                                                                                        <div class="start-time-icon">
                                                                                            <i class="fal fa-plane-arrival"></i>
                                                                                        </div>
                                                                                        <div class="start-time-info">
                                                                                            <h6 class="end-time-text">{{ flight_details.FlightDetails.0.ArrivalDateTime|slice:"12:" }}</h6>
                                                                                            <p class="flight-full-date">{{ flight_details.FlightDetails.0.ArrivalDateTime|slice:":11" }}</p>
                                                                                            <span
                                                                                                class="flight-destination">{{flight_details.FlightDetails.0.Destination}}</span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                                                <input type="hidden" name="FlightID1" value="{{flight_details.FlightDetails.1.FlightID}}">
                                                                                <input type="hidden" name="FlightNumber1" value="{{flight_details.FlightDetails.1.FlightNumber}}">
                                                                                <input type="hidden" name="Origin1" value="{{flight_details.FlightDetails.1.Origin}}">
                                                                                <input type="hidden" name="Destination1" value="{{flight_details.FlightDetails.1.Destination}}">
                                                                                <input type="hidden" name="DepartureDateTime1" value="{{flight_details.FlightDetails.1.DepartureDateTime}}">
                                                                                <input type="hidden" name="ArrivalDateTime1" value="{{flight_details.FlightDetails.1.ArrivalDateTime}}">
                                                                                <div class="flight-booking-time">
                                                                                    <div class="start-time">
                                                                                        <div class="start-time-icon">
                                                                                            <i class="fal fa-plane-departure"></i>
                                                                                        </div>
                                                                                        <div class="start-time-info">
                                                                                            <h6 class="start-time-text">{{flight_details.FlightDetails.1.DepartureDateTime|slice:"12:"}}</h6>
                                                                                            <p class="flight-full-date">{{flight_details.FlightDetails.1.DepartureDateTime|slice:":11"}}</p>
                                                                                            <span
                                                                                                class="flight-destination">{{flight_details.FlightDetails.1.Origin}}</span>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="flight-stop">                                              
                                                                                        <div class="flight-stop-arrow"></div> 
                                                                                    </div>
                                                                                    <div class="end-time">
                                                                                        <div class="start-time-icon">
                                                                                            <i class="fal fa-plane-arrival"></i>
                                                                                        </div>
                                                                                        <div class="start-time-info">
                                                                                            <h6 class="end-time-text">{{ flight_details.FlightDetails.1.ArrivalDateTime|slice:"12:" }}</h6>
                                                                                            <p class="flight-full-date">{{ flight_details.FlightDetails.1.ArrivalDateTime|slice:":11" }}</p>
                                                                                            <span
                                                                                                class="flight-destination">{{flight_details.FlightDetails.1.Destination}}</span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                                {% endif %}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-12 col-xl-6">
                                                                <div class="flight-booking-detail-right">
                                                                    <ul class="nav nav-tabs" id="frTab{{ forloop.counter }}" role="tablist">
                                                                        <li class="nav-item" role="presentation">
                                                                            <button class="nav-link active" id="fr-tab1"
                                                                                data-bs-toggle="tab" data-bs-target="#fr-tab-pane1-{{ forloop.counter }}"
                                                                                type="button" role="tab"
                                                                                aria-controls="fr-tab-pane1-{{ forloop.counter }}"
                                                                                aria-selected="true">Baggage</button>
                                                                        </li>
                                                                        <li class="nav-item" role="presentation">
                                                                            <button class="nav-link" id="fr-tab2"
                                                                                data-bs-toggle="tab" data-bs-target="#fr-tab-pane2-{{ forloop.counter }}"
                                                                                type="button" role="tab"
                                                                                aria-controls="fr-tab-pane2-{{ forloop.counter }}"
                                                                                aria-selected="false">Fare</button>
                                                                        </li>
                                                                    
                                                                    </ul>

                                                                    <div class="tab-content" id="frTabContent{{ forloop.counter }}">
                                                                        <div class="tab-pane fade show active" id="fr-tab-pane1-{{ forloop.counter }}"
                                                                            role="tabpanel" aria-labelledby="fr-tab1" tabindex="0">
                                                                            <div class="flight-booking-detail-info">
                                                                                <table class="table table-borderless">
                                                                                    <tr>
                                                                                        <th>Flight</th>
                                                                                        <th>Cabin</th>
                                                                                        <th>Check In</th>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>{{flight_details.FlightDetails.0.Origin}} - {{flight_details.FlightDetails.0.Destination}}</td>
                                                                                        <td>7 Kg</td>
                                                                                        <td>{{flight_details.FlightDetails.0.Baggage}}</td>
                                                                                    </tr>
                                                                                    {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                                                    <tr>
                                                                                        <td>{{flight_details.FlightDetails.1.Origin}} - {{flight_details.FlightDetails.1.Destination}}</td>
                                                                                        <td>7 Kg</td>
                                                                                        <td>{{flight_details.FlightDetails.1.Baggage}}</td>
                                                                                    </tr>
                                                                                    {% endif %}
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                        <div class="tab-pane fade" id="fr-tab-pane2-{{ forloop.counter }}" role="tabpanel"
                                                                            aria-labelledby="fr-tab2" tabindex="0">
                                                                            <div class="flight-booking-detail-info">
                                                                                <table class="table table-borderless">
                                                                                    <tr>
                                                                                        <th>Fare Summary</th>
                                                                                        <th>Base Fare</th>
                                                                                        <th>Tax</th>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>Adult</td>
                                                                                        <td id="baseAmount">â‚¹{{flight_details.Fares.0.Faredescription.0.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.0.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="adultBaseAmount" value="{{flight_details.Fares.0.Faredescription.0.BaseAmount}}">
                                                                                        <input type="hidden" name="adultTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.0.TotalTaxAmount}}">
                                                                                        
                                                                                    </tr>
                                                                                    {% if flight_details.Fares.0.Faredescription|length == 2 %}
                                                                                    <tr>
                                                                                        <td>Child</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="childBaseAmount" value="{{flight_details.Fares.0.Faredescription.1.BaseAmount}}">
                                                                                        <input type="hidden" name="childTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount}}">
                                                                                    </tr>
                                                                                    {% endif %}
                                                                                    
                                                                                    {% if flight_details.Fares.0.Faredescription|length == 3 %}
                                                                                    <tr>
                                                                                        <td>Child</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="childBaseAmount" value="{{flight_details.Fares.0.Faredescription.1.BaseAmount}}">
                                                                                        <input type="hidden" name="childTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount}}">
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>Infant</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.2.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.2.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="infantBaseAmount" value="{{flight_details.Fares.0.Faredescription.2.BaseAmount}}">
                                                                                        <input type="hidden" name="infantTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.2.TotalTaxAmount}}">
                                                                                    </tr>
                                                                                    {% endif %}
                                                                                </table>
                                                    

                                                                            </div>
                                                                        </div>
                                                                    
                                                                    </div>
                                                                 
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>


                                            </div>
                                        </div>
                                    </div>

                            </form>           
                            {% endfor %}
                            {% endfor %}

                        </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
    <!-- flight booking end -->


    {% if flight_type == 'R' %}
            <!-- flight booking -->
        <button id="scrollButton" class="favorite styled" type="button">Return Flight</button>
        <div class="flight-booking flight-grid py-120">
            <div class="container">
                <div class="row">
                    <!-- booking sidebar -->
                    <div class="col-lg-4 col-xl-3 mb-4">
                        <div class="booking-sidebar">
                            <div class="booking-item">
                                <h4 class="booking-title">Flight Price</h4>
                                <div class="flight-price">
                                    <div class="price-range-slider">
                                        <div class="price-range-info">
                                            <label for="priceRange1">Price:</label>
                                            <input type="text" class="priceRange" id="priceRange1" readonly>
                                        </div>
                                        <div id="price-range1" class="price-range slider"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="booking-item">
                                <h4 class="booking-title">Flight Time</h4>
                                <div class="flight-time">
                                    <div class="form-check">
                                        <input class="form-check-input" name="flight-time" type="checkbox" value="1"
                                            id="flight-time1">
                                        <label class="form-check-label" for="flight-time1">
                                            <i class="far fa-sunrise"></i> 00:00 - 05:59 <span>(20)</span>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="flight-time" type="checkbox" value="2"
                                            id="flight-time2">
                                        <label class="form-check-label" for="flight-time2">
                                            <i class="far fa-sun-bright"></i> 06:00 - 11:59 <span>(15)</span>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="flight-time" type="checkbox" value="3"
                                            id="flight-time3">
                                        <label class="form-check-label" for="flight-time3">
                                            <i class="far fa-sunset"></i> 12:00 - 17:59 <span>(18)</span>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="flight-time" type="checkbox" value="3"
                                            id="flight-time4">
                                        <label class="form-check-label" for="flight-time4">
                                            <i class="far fa-moon-stars"></i> 18:00 - 23:59 <span>(21)</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="booking-item">
                                <h4 class="booking-title">Flight Stops</h4>
                                <div class="flight-stop">
                                    <div class="form-check">
                                        <input class="form-check-input" name="flight-stop" type="checkbox" value="0"
                                            id="flight-stop1">
                                        <label class="form-check-label" for="flight-stop1">
                                            Non Stop <span></span>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="flight-stop" type="checkbox" value="1"
                                            id="flight-stop2">
                                        <label class="form-check-label" for="flight-stop2">
                                            1 Stop <span></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="booking-item">
                                <h4 class="booking-title">Airlines</h4>
                                <div class="flight-airline" id="checkbox-container">
                                    <!-- flight name filters -->
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- booking grid -->
                    <div class="col-lg-8 col-xl-9" id="scroll">
                        <div class="row">

                            <!-- flight booking item -->
                            <div class="col-lg-6">
                                {% for flight_details in availabilitycheck_Response.ItineraryFlightList.0.Items %}

                                

                                <div class="flight-booking-item">
                                    <input type="hidden" name="BaseOrigin" value="{{DepartureStation}}">
                                    <input type="hidden" name="BaseDestination" value="{{ArrivalStation}}">
                                    <input type="hidden" name="TripType" value="{{flight_type}}">
                                    <input type="hidden" name="AdultCount" value="{{adult}}">
                                    <input type="hidden" name="children" value="{{children}}">
                                    <input type="hidden" name="infant" value="{{infant}}">
                                    <input type="hidden" name="FlightID" value="{{flight_details.FlightDetails.0.FlightID}}">
                                    <input type="hidden" name="FlightNumber" value="{{flight_details.FlightDetails.0.FlightNumber}}">
                                    <input type="hidden" name="Origin" value="{{flight_details.FlightDetails.0.Origin}}">
                                    <input type="hidden" name="Destination" value="{{flight_details.FlightDetails.0.Destination}}">
                                    <input type="hidden" name="DepartureDateTime" value="{{flight_details.FlightDetails.0.DepartureDateTime}}">
                                    <input type="hidden" name="ArrivalDateTime" value="{{flight_details.FlightDetails.0.ArrivalDateTime}}">
                                    <input type="hidden" name="Trackid" value="{{availabilitycheck_Response.Trackid}}">
                                    <input type="hidden" name="Stops" value="{{flight_details.FlightDetails.0.Stops}}">
                                    
                                    <div class="flight-booking-wrapper">
                                        <div class="flight-booking-info">
                                            <div class="flight-booking-content">
                                               
                                                <div class="flight-booking-time">
                                                    <div class="start-time">
                                                        <div class="start-time-icon">
                                                            <i class="fal fa-plane-departure"></i>
                                                        </div>
                                                        <div class="start-time-info">
                                                            <h6 class="start-time-text">{{flight_details.FlightDetails.0.DepartureDateTime|slice:"12:"}}</h6>
                                                            <span class="flight-destination">{{flight_details.FlightDetails.0.Origin}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="flight-stop">
                                                        <span class="flight-stop-number"><span class="filterstp" data-stops="{{ flight_details.FlightDetails.0.Stops }}">
                                                            {{ flight_details.FlightDetails.0.Stops }}
                                                        </span> Stop</span>
                                                        
                                                        <div class="flight-stop-arrow"></div>
                                                    </div>
                                                    <div class="end-time">
                                                        <div class="start-time-icon">
                                                            <i class="fal fa-plane-arrival"></i>
                                                        </div>
                                                        <div class="start-time-info">

                                                            {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                            <h6 class="end-time-text">{{ flight_details.FlightDetails.1.ArrivalDateTime|slice:"12:" }}</h6>                                           
                                                            <span class="flight-destination">{{flight_details.FlightDetails.1.Destination}}</span>
                                                            {% else %}
                                                            <h6 class="end-time-text">{{ flight_details.FlightDetails.0.ArrivalDateTime|slice:"12:" }}</h6>
                                                            <span class="flight-destination">{{flight_details.FlightDetails.0.Destination}}</span>

                                                            {% endif %}

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="flight-booking-duration">
                                                    {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                    <span class="duration-text">{{flight_details.FlightDetails.1.JourneyTime|format_time }}</span>
                                                    {% else %}
                                                    <span class="duration-text">{{flight_details.FlightDetails.0.JourneyTime|format_time }}</span>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flight-booking-price">
                                            <div class="price-info">
                                                <span class="price-amount">â‚¹{{flight_details.Fares.0.Faredescription.0.BaseAmount|floatformat:2}}</span>
                                                <span class="discount-price"> -/pax</span>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input Rone-way-radio" type="radio" name="flexRadioDefault" id="flexRadioDefault{{forloop.counter}}">
                                                <label class="form-check-label" for="flexRadioDefault{{forloop.counter}}">
                                                    Select
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flight-booking-detail">
                                        <div class="flight-booking-detail-header">
                                            <div>
                                                <span><img src="https://pic.tripcdn.com/airline_logo/2x/{{ flight_details.FlightDetails.0.Stock|lower }}.webp" alt="{{ flight_details.FlightDetails.0.Stock }}" width="29" height="10"></span>
                                                <span class="flight-airline-name">{{flight_details.FlightDetails.0.Stock}}</span>
                                            </div>
                                            <a title="{{flight_details.FlightDetails.0.AvailSeat}} Seat Left" style="text-decoration: none; color: red; font-size: 20px;">
                                                <i class="material-icons" style="font-size: 18px; color: black; cursor: pointer;">&#xe903;</i>
                                            </a> 
                                            <a href="#flight-booking-collapse{{ forloop.counter }}" data-bs-toggle="collapse" role="button"
                                            aria-expanded="false" aria-controls="flight-booking-collapse1">Flight
                                            Details <i class="far fa-angle-down"></i></a>
                                        </div>


                                        <div class="collapse" id="flight-booking-collapse{{ forloop.counter }}">
                                            <div class="flight-booking-detail-wrapper">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="flight-booking-detail-left">
                                                            <ul class="nav nav-tabs" id="flTab6" role="tablist">
                                                                <li class="nav-item" role="presentation">
                                                                    <button class="nav-link active" id="fl-tab13"
                                                                        data-bs-toggle="tab"
                                                                        data-bs-target="#fl-tab-pane13" type="button"
                                                                        role="tab" aria-controls="fl-tab-pane13"
                                                                        aria-selected="true">{{flight_details.FlightDetails.0.Origin}} - {% if flight_details.FlightDetails.0.Stops == "1" %}{{flight_details.FlightDetails.1.Destination}} {% else %}{{flight_details.FlightDetails.0.Destination}}{% endif %}</button>
                                                                </li>
                                                            </ul>
                                                            <div class="tab-content" id="flTabContent6">
                                                                <div class="tab-pane fade show active"
                                                                    id="fl-tab-pane13" role="tabpanel"
                                                                    aria-labelledby="fl-tab13" tabindex="0">
                                                                    <div class="flight-booking-detail-info">
                                                                        <div class="flight-booking-airline">
                                                                            <div class="flight-airline-img">
                                                                                <img src="https://pic.tripcdn.com/airline_logo/2x/{{ flight_details.FlightDetails.0.Stock|lower }}.webp" alt="{{ flight_details.FlightDetails.0.Stock }}" width="90" height="58">
                                                                            </div>
                                                                            <div class="flight-airline-info flex-grow-1">
                                                                                <h5 class="flight-airline-name">{{flight_details.FlightDetails.0.Stock}}</h5>
                                                                                <span class="flight-airline-model">{{flight_details.FlightDetails.0.FlightNumber}}</span>
                                                                            </div>
                                                                            <p class="flight-airline-class">( {% if FarecabinOption == 'E' %}Economy{% elif FarecabinOption == 'B' %}Business{% elif FarecabinOption == 'F' %}First Class{% endif %} )</p>
                                                                        </div>
                                                                        <div class="flight-booking-time">
                                                                            <div class="start-time">
                                                                                <div class="start-time-icon">
                                                                                    <i class="fal fa-plane-departure"></i>
                                                                                </div>
                                                                                <div class="start-time-info">
                                                                                    <h6 class="start-time-text">{{flight_details.FlightDetails.0.DepartureDateTime|slice:"12:"}}</h6>
                                                                                    <p class="flight-full-date">{{flight_details.FlightDetails.0.DepartureDateTime|slice:":11"}}</p>
                                                                                    <span class="flight-destination">{{flight_details.FlightDetails.0.Origin}}</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="flight-stop">
                                                                             
                                                                                <div class="flight-stop-arrow"></div>
                                                                            
                                                                            </div>
                                                                            <div class="end-time">
                                                                                <div class="start-time-icon">
                                                                                    <i class="fal fa-plane-arrival"></i>
                                                                                </div>
                                                                                <div class="start-time-info">
                                                                                    <h6 class="end-time-text">{{ flight_details.FlightDetails.0.ArrivalDateTime|slice:"12:" }}</h6>
                                                                                    <p class="flight-full-date">{{ flight_details.FlightDetails.0.ArrivalDateTime|slice:":11" }}</p>
                                                                                    <span class="flight-destination">{{flight_details.FlightDetails.0.Destination}}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                                        <input type="hidden" name="FlightID1" value="{{flight_details.FlightDetails.1.FlightID}}">
                                                                        <input type="hidden" name="FlightNumber1" value="{{flight_details.FlightDetails.1.FlightNumber}}">
                                                                        <input type="hidden" name="Origin1" value="{{flight_details.FlightDetails.1.Origin}}">
                                                                        <input type="hidden" name="Destination1" value="{{flight_details.FlightDetails.1.Destination}}">
                                                                        <input type="hidden" name="DepartureDateTime1" value="{{flight_details.FlightDetails.1.DepartureDateTime}}">
                                                                        <input type="hidden" name="ArrivalDateTime1" value="{{flight_details.FlightDetails.1.ArrivalDateTime}}">
                                                                        <div class="flight-booking-time">
                                                                            <div class="start-time">
                                                                                <div class="start-time-icon">
                                                                                    <i class="fal fa-plane-departure"></i>
                                                                                </div>
                                                                                <div class="start-time-info">
                                                                                    <h6 class="start-time-text">{{flight_details.FlightDetails.1.DepartureDateTime|slice:"12:"}}</h6>
                                                                                    <p class="flight-full-date">{{flight_details.FlightDetails.1.DepartureDateTime|slice:":11"}}</p>
                                                                                    <span
                                                                                        class="flight-destination">{{flight_details.FlightDetails.1.Origin}}</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="flight-stop">                                              
                                                                                <div class="flight-stop-arrow"></div> 
                                                                            </div>
                                                                            <div class="end-time">
                                                                                <div class="start-time-icon">
                                                                                    <i class="fal fa-plane-arrival"></i>
                                                                                </div>
                                                                                <div class="start-time-info">
                                                                                    <h6 class="end-time-text">{{ flight_details.FlightDetails.1.ArrivalDateTime|slice:"12:" }}</h6>
                                                                                    <p class="flight-full-date">{{ flight_details.FlightDetails.1.ArrivalDateTime|slice:":11" }}</p>
                                                                                    <span
                                                                                        class="flight-destination">{{flight_details.FlightDetails.1.Destination}}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        {% endif %}


                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-12">
                                                        <div class="flight-booking-detail-right">
                                                                    <ul class="nav nav-tabs" id="frTab{{ forloop.counter }}" role="tablist">
                                                                        <li class="nav-item" role="presentation">
                                                                            <button class="nav-link active" id="fr-tab1"
                                                                                data-bs-toggle="tab" data-bs-target="#fr-tab-pane1-{{ forloop.counter }}"
                                                                                type="button" role="tab"
                                                                                aria-controls="fr-tab-pane1-{{ forloop.counter }}"
                                                                                aria-selected="true">Baggage</button>
                                                                        </li>
                                                                        <li class="nav-item" role="presentation">
                                                                            <button class="nav-link" id="fr-tab2"
                                                                                data-bs-toggle="tab" data-bs-target="#fr-tab-pane2-{{ forloop.counter }}"
                                                                                type="button" role="tab"
                                                                                aria-controls="fr-tab-pane2-{{ forloop.counter }}"
                                                                                aria-selected="false">Fare</button>
                                                                        </li>
                                                                    </ul>
                                                                    <div class="tab-content" id="frTabContent{{ forloop.counter }}">
                                                                        <div class="tab-pane fade show active" id="fr-tab-pane1-{{ forloop.counter }}"
                                                                            role="tabpanel" aria-labelledby="fr-tab1" tabindex="0">
                                                                            <div class="flight-booking-detail-info">
                                                                                <table class="table table-borderless">
                                                                                    <tr>
                                                                                        <th>Flight</th>
                                                                                        <th>Cabin</th>
                                                                                        <th>Check In</th>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>{{flight_details.FlightDetails.0.Origin}} - {{flight_details.FlightDetails.0.Destination}}</td>
                                                                                        <td>7 Kg</td>
                                                                                        <td>{{flight_details.FlightDetails.0.Baggage}}</td>
                                                                                    </tr>
                                                                                    {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                                                    <tr>
                                                                                        <td>{{flight_details.FlightDetails.1.Origin}} - {{flight_details.FlightDetails.1.Destination}}</td>
                                                                                        <td>7 Kg</td>
                                                                                        <td>{{flight_details.FlightDetails.1.Baggage}}</td>
                                                                                    </tr>
                                                                                    {% endif %}
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                        <div class="tab-pane fade" id="fr-tab-pane2-{{ forloop.counter }}" role="tabpanel"
                                                                            aria-labelledby="fr-tab2" tabindex="0">
                                                                            <div class="flight-booking-detail-info">
                                                                                <table class="table table-borderless">
                                                                                    <tr>
                                                                                        <th>Fare Summary</th>
                                                                                        <th>Base Fare</th>
                                                                                        <th>Tax</th>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>Adult</td>
                                                                                        <td id="baseAmount">â‚¹{{flight_details.Fares.0.Faredescription.0.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.0.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="adultBaseAmount" value="{{flight_details.Fares.0.Faredescription.0.BaseAmount}}">
                                                                                        <input type="hidden" name="adultTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.0.TotalTaxAmount}}">
                                                                                        
                                                                                    </tr>
                                                                                    {% if flight_details.Fares.0.Faredescription|length == 2 %}
                                                                                    <tr>
                                                                                        <td>Child</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="childBaseAmount" value="{{flight_details.Fares.0.Faredescription.1.BaseAmount}}">
                                                                                        <input type="hidden" name="childTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount}}">
                                                                                    </tr>
                                                                                    {% endif %}
                                                                                    
                                                                                    {% if flight_details.Fares.0.Faredescription|length == 3 %}
                                                                                    <tr>
                                                                                        <td>Child</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="childBaseAmount" value="{{flight_details.Fares.0.Faredescription.1.BaseAmount}}">
                                                                                        <input type="hidden" name="childTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount}}">
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>Infant</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.2.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.2.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="infantBaseAmount" value="{{flight_details.Fares.0.Faredescription.2.BaseAmount}}">
                                                                                        <input type="hidden" name="infantTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.2.TotalTaxAmount}}">
                                                                                    </tr>
                                                                                    {% endif %}
                                                                                </table>
                                                    

                                                                            </div>
                                                                        </div>
                                                                    
                                                                    </div>
                                
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>

                            <!-- flight booking item -->
                            <!--return flight -->
                            <div class="col-lg-6" id="targetDiv">
                                {% for flight_details in availabilitycheck_Response.ItineraryFlightList.1.Items %}
                                <div class="flight-booking-item">
                                    <input type="hidden" name="BaseOrigin" value="{{ArrivalStation}}">
                                    <input type="hidden" name="BaseDestination" value="{{DepartureStation}}">
                                    <input type="hidden" name="TripType" value="{{flight_type}}">
                                    <input type="hidden" name="AdultCount" value="{{adult}}">
                                    <input type="hidden" name="children" value="{{children}}">
                                    <input type="hidden" name="infant" value="{{infant}}">
                                    <input type="hidden" name="FlightID" value="{{flight_details.FlightDetails.0.FlightID}}">
                                    <input type="hidden" name="FlightNumber" value="{{flight_details.FlightDetails.0.FlightNumber}}">
                                    <input type="hidden" name="Origin" value="{{flight_details.FlightDetails.0.Origin}}">
                                    <input type="hidden" name="Destination" value="{{flight_details.FlightDetails.0.Destination}}">
                                    <input type="hidden" name="DepartureDateTime" value="{{flight_details.FlightDetails.0.DepartureDateTime}}">
                                    <input type="hidden" name="ArrivalDateTime" value="{{flight_details.FlightDetails.0.ArrivalDateTime}}">
                                    <input type="hidden" name="Trackid" value="{{availabilitycheck_Response.Trackid}}">
                                    <input type="hidden" name="Stops" value="{{flight_details.FlightDetails.0.Stops}}">
                                   
                                    <div class="flight-booking-wrapper">
                                        <div class="flight-booking-info">
                                            <div class="flight-booking-content">
                                               
                                                <div class="flight-booking-time">
                                                    <div class="start-time">
                                                        <div class="start-time-icon">
                                                            <i class="fal fa-plane-departure"></i>
                                                        </div>
                                                        <div class="start-time-info">
                                                            <h6 class="start-time-text">{{flight_details.FlightDetails.0.DepartureDateTime|slice:"12:"}}</h6>
                                                            <span class="flight-destination">{{flight_details.FlightDetails.0.Origin}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="flight-stop">
                                                        <span class="flight-stop-number"><span class="filterstp" data-stops="{{ flight_details.FlightDetails.0.Stops }}">
                                                            {{ flight_details.FlightDetails.0.Stops }}
                                                        </span> Stop</span>
                                                        <div class="flight-stop-arrow"></div>
                                                    </div>
                                                    <div class="end-time">
                                                        <div class="start-time-icon">
                                                            <i class="fal fa-plane-arrival"></i>
                                                        </div>
                                                        <div class="start-time-info">

                                                            {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                            <h6 class="end-time-text">{{ flight_details.FlightDetails.1.ArrivalDateTime|slice:"12:" }}</h6>                                           
                                                            <span class="flight-destination">{{flight_details.FlightDetails.1.Destination}}</span>
                                                            {% else %}
                                                            <h6 class="end-time-text">{{ flight_details.FlightDetails.0.ArrivalDateTime|slice:"12:" }}</h6>
                                                            <span class="flight-destination">{{flight_details.FlightDetails.0.Destination}}</span>

                                                            {% endif %}

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="flight-booking-duration">
                                                    {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                    <span class="duration-text">{{flight_details.FlightDetails.1.JourneyTime|format_time }}</span>
                                                    {% else %}
                                                    <span class="duration-text">{{flight_details.FlightDetails.0.JourneyTime|format_time }}</span>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flight-booking-price">
                                            <div class="price-info">
                                                <span class="price-amount">â‚¹{{flight_details.Fares.0.Faredescription.0.BaseAmount|floatformat:2}}</span>
                                                <span class="discount-price"> -/pax</span>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input Rreturn-radio" type="radio" name="flexRadioDefaultR" id="flexRadioDefaultR{{forloop.counter}}">
                                                <label class="form-check-label" for="flexRadioDefaultR{{forloop.counter}}">
                                                    Select
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flight-booking-detail">
                                        <div class="flight-booking-detail-header">
                                            <div>
                                                <span><img src="https://pic.tripcdn.com/airline_logo/2x/{{ flight_details.FlightDetails.0.Stock|lower }}.webp" alt="{{ flight_details.FlightDetails.0.Stock }}" width="29" height="10"></span>
                                                <span class="flight-airline-name">{{flight_details.FlightDetails.0.Stock}}</span>
                                            </div>
                                            <a title="{{flight_details.FlightDetails.0.AvailSeat}} Seat Left" style="text-decoration: none; color: red; font-size: 20px;">
                                                <i class="material-icons" style="font-size: 18px; color: black; cursor: pointer;">&#xe903;</i>
                                            </a> 


                                            <a href="#flight-booking-collapseR{{ forloop.counter }}" data-bs-toggle="collapse" role="button"
                                            aria-expanded="false" aria-controls="flight-booking-collapse1">Flight
                                            Details <i class="far fa-angle-down"></i></a>
                                        </div>


                                        <div class="collapse" id="flight-booking-collapseR{{ forloop.counter }}">
                                            <div class="flight-booking-detail-wrapper">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="flight-booking-detail-left">
                                                            <ul class="nav nav-tabs" id="flTab6" role="tablist">
                                                                <li class="nav-item" role="presentation">
                                                                    <button class="nav-link active" id="fl-tab13"
                                                                        data-bs-toggle="tab"
                                                                        data-bs-target="#fl-tab-pane13" type="button"
                                                                        role="tab" aria-controls="fl-tab-pane13"
                                                                        aria-selected="true">{{flight_details.FlightDetails.0.Origin}} - {% if flight_details.FlightDetails.0.Stops == "1" %}{{flight_details.FlightDetails.1.Destination}} {% else %}{{flight_details.FlightDetails.0.Destination}}{% endif %}</button>
                                                                </li>
                                                            </ul>
                                                            <div class="tab-content" id="flTabContent6">
                                                                <div class="tab-pane fade show active"
                                                                    id="fl-tab-pane13" role="tabpanel"
                                                                    aria-labelledby="fl-tab13" tabindex="0">
                                                                    <div class="flight-booking-detail-info">
                                                                        <div class="flight-booking-airline">
                                                                            <div class="flight-airline-img">
                                                                                <img src="https://pic.tripcdn.com/airline_logo/2x/{{ flight_details.FlightDetails.0.Stock|lower }}.webp" alt="{{ flight_details.FlightDetails.0.Stock }}" width="90" height="58">
                                                                            </div>
                                                                            <div class="flight-airline-info flex-grow-1">
                                                                                <h5 class="flight-airline-name">{{flight_details.FlightDetails.0.Stock}}</h5>
                                                                                <span class="flight-airline-model">{{flight_details.FlightDetails.0.FlightNumber}}</span>
                                                                            </div>
                                                                            <p class="flight-airline-class">( {% if FarecabinOption == 'E' %}Economy{% elif FarecabinOption == 'B' %}Business{% elif FarecabinOption == 'F' %}First Class{% endif %} )</p>
                                                                        </div>
                                                                        <div class="flight-booking-time">
                                                                            <div class="start-time">
                                                                                <div class="start-time-icon">
                                                                                    <i class="fal fa-plane-departure"></i>
                                                                                </div>
                                                                                <div class="start-time-info">
                                                                                    <h6 class="start-time-text">{{flight_details.FlightDetails.0.DepartureDateTime|slice:"12:"}}</h6>
                                                                                    <p class="flight-full-date">{{flight_details.FlightDetails.0.DepartureDateTime|slice:":11"}}</p>
                                                                                    <span class="flight-destination">{{flight_details.FlightDetails.0.Origin}}</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="flight-stop">
                                                                             
                                                                                <div class="flight-stop-arrow"></div>
                                                                            
                                                                            </div>
                                                                            <div class="end-time">
                                                                                <div class="start-time-icon">
                                                                                    <i class="fal fa-plane-arrival"></i>
                                                                                </div>
                                                                                <div class="start-time-info">
                                                                                    <h6 class="end-time-text">{{ flight_details.FlightDetails.0.ArrivalDateTime|slice:"12:" }}</h6>
                                                                                    <p class="flight-full-date">{{ flight_details.FlightDetails.0.ArrivalDateTime|slice:":11" }}</p>
                                                                                    <span class="flight-destination">{{flight_details.FlightDetails.0.Destination}}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                                        <input type="hidden" name="FlightID1" value="{{flight_details.FlightDetails.1.FlightID}}">
                                                                        <input type="hidden" name="FlightNumber1" value="{{flight_details.FlightDetails.1.FlightNumber}}">
                                                                        <input type="hidden" name="Origin1" value="{{flight_details.FlightDetails.1.Origin}}">
                                                                        <input type="hidden" name="Destination1" value="{{flight_details.FlightDetails.1.Destination}}">
                                                                        <input type="hidden" name="DepartureDateTime1" value="{{flight_details.FlightDetails.1.DepartureDateTime}}">
                                                                        <input type="hidden" name="ArrivalDateTime1" value="{{flight_details.FlightDetails.1.ArrivalDateTime}}">
                                                                        <div class="flight-booking-time">
                                                                            <div class="start-time">
                                                                                <div class="start-time-icon">
                                                                                    <i class="fal fa-plane-departure"></i>
                                                                                </div>
                                                                                <div class="start-time-info">
                                                                                    <h6 class="start-time-text">{{flight_details.FlightDetails.1.DepartureDateTime|slice:"12:"}}</h6>
                                                                                    <p class="flight-full-date">{{flight_details.FlightDetails.1.DepartureDateTime|slice:":11"}}</p>
                                                                                    <span
                                                                                        class="flight-destination">{{flight_details.FlightDetails.1.Origin}}</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="flight-stop">                                              
                                                                                <div class="flight-stop-arrow"></div> 
                                                                            </div>
                                                                            <div class="end-time">
                                                                                <div class="start-time-icon">
                                                                                    <i class="fal fa-plane-arrival"></i>
                                                                                </div>
                                                                                <div class="start-time-info">
                                                                                    <h6 class="end-time-text">{{ flight_details.FlightDetails.1.ArrivalDateTime|slice:"12:" }}</h6>
                                                                                    <p class="flight-full-date">{{ flight_details.FlightDetails.1.ArrivalDateTime|slice:":11" }}</p>
                                                                                    <span
                                                                                        class="flight-destination">{{flight_details.FlightDetails.1.Destination}}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        {% endif %}


                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-12">
                                                        <div class="flight-booking-detail-right">
                                                            <ul class="nav nav-tabs" id="frTab{{ forloop.counter }}" role="tablist">
                                                                <li class="nav-item" role="presentation">
                                                                    <button class="nav-link active" id="fr-tab1R-{{ forloop.counter }}"
                                                                        data-bs-toggle="tab" data-bs-target="#fr-tab-pane1R-{{ forloop.counter }}"
                                                                        type="button" role="tab"
                                                                        aria-controls="fr-tab-pane1R-{{ forloop.counter }}"
                                                                        aria-selected="true">Baggage</button>
                                                                </li>
                                                                <li class="nav-item" role="presentation">
                                                                    <button class="nav-link" id="fr-tab2R-{{ forloop.counter }}"
                                                                        data-bs-toggle="tab" data-bs-target="#fr-tab-pane2R-{{ forloop.counter }}"
                                                                        type="button" role="tab"
                                                                        aria-controls="fr-tab-pane2R-{{ forloop.counter }}"
                                                                        aria-selected="false">Fare</button>
                                                                </li>
                                                            </ul>
                                                                    <div class="tab-content" id="frTabContent{{ forloop.counter }}">
                                                                        <div class="tab-pane fade show active" id="fr-tab-pane1R-{{ forloop.counter }}"
                                                                            role="tabpanel" aria-labelledby="fr-tab1" tabindex="0">
                                                                            <div class="flight-booking-detail-info">
                                                                                <table class="table table-borderless">
                                                                                    <tr>
                                                                                        <th>Flight</th>
                                                                                        <th>Cabin</th>
                                                                                        <th>Check In</th>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>{{flight_details.FlightDetails.0.Origin}} - {{flight_details.FlightDetails.0.Destination}}</td>
                                                                                        <td>7 Kg</td>
                                                                                        <td>{{flight_details.FlightDetails.0.Baggage}}</td>
                                                                                    </tr>
                                                                                    {% if flight_details.FlightDetails.0.Stops == "1" %}
                                                                                    <tr>
                                                                                        <td>{{flight_details.FlightDetails.1.Origin}} - {{flight_details.FlightDetails.1.Destination}}</td>
                                                                                        <td>7 Kg</td>
                                                                                        <td>{{flight_details.FlightDetails.1.Baggage}}</td>
                                                                                    </tr>
                                                                                    {% endif %}
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                        <div class="tab-pane fade" id="fr-tab-pane2R-{{ forloop.counter }}" role="tabpanel"
                                                                            aria-labelledby="fr-tab2" tabindex="0">
                                                                            <div class="flight-booking-detail-info">
                                                                                <table class="table table-borderless">
                                                                                    <tr>
                                                                                        <th>Fare Summary</th>
                                                                                        <th>Base Fare</th>
                                                                                        <th>Tax</th>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>Adult</td>
                                                                                        <td id="baseAmount">â‚¹{{flight_details.Fares.0.Faredescription.0.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.0.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="adultBaseAmount" value="{{flight_details.Fares.0.Faredescription.0.BaseAmount}}">
                                                                                        <input type="hidden" name="adultTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.0.TotalTaxAmount}}">
                                                                                        
                                                                                    </tr>
                                                                                    {% if flight_details.Fares.0.Faredescription|length == 2 %}
                                                                                    <tr>
                                                                                        <td>Child</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="childBaseAmount" value="{{flight_details.Fares.0.Faredescription.1.BaseAmount}}">
                                                                                        <input type="hidden" name="childTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount}}">
                                                                                    </tr>
                                                                                    {% endif %}
                                                                                    
                                                                                    {% if flight_details.Fares.0.Faredescription|length == 3 %}
                                                                                    <tr>
                                                                                        <td>Child</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="childBaseAmount" value="{{flight_details.Fares.0.Faredescription.1.BaseAmount}}">
                                                                                        <input type="hidden" name="childTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.1.TotalTaxAmount}}">
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>Infant</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.2.BaseAmount|floatformat:2}}</td>
                                                                                        <td>â‚¹{{flight_details.Fares.0.Faredescription.2.TotalTaxAmount|floatformat:2}}</td>
                                                                                        <input type="hidden" name="infantBaseAmount" value="{{flight_details.Fares.0.Faredescription.2.BaseAmount}}">
                                                                                        <input type="hidden" name="infantTotalTaxAmount" value="{{flight_details.Fares.0.Faredescription.2.TotalTaxAmount}}">
                                                                                    </tr>
                                                                                    {% endif %}
                                                                                </table>
                                                    

                                                                            </div>
                                                                        </div>
                                                                    
                                                                    </div>                                
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- footer nav -->
        <form action="{% url "Rflight_pricing" %}" method="post">
            {% csrf_token %}
            <div class="fixed-bottom-div">             
            </div>
        </form>
        

        <!-- flight booking end -->
    {% endif %}




    <script>
        // Common function to search and populate airport data
        const searchAndPopulateAirport = async (searchBox, airportList, selectedAirportElement) => {
            // get json
            try {
                // Get JSON data
                const res = await fetch("https://raw.githubusercontent.com/Mehmedx7/Cart_Page/main/cart/convertcsvv.json");
                const airports = await res.json();
        
                // Filter data
                let fits = airports.filter((airport) => {
                    const regex = new RegExp(`^${searchBox}`, "gi");
                    return (
                        airport.country_id.match(regex) ||
                        airport.name.match(regex) ||
                        airport.city.match(regex) ||
                        airport.iata_code.match(regex)
                    );
                });

                if (searchBox.length === 0) {
                    fits = [];
                    airportList.innerHTML = "";
                }

                outputHtml(fits, airportList, selectedAirportElement);
            } catch (error) {
                console.error("Error fetching or processing data:", error);
            }
        };
        // Common function to output airport data
        const outputHtml = (fits, airportList, selectedAirportElement) => {
            if (fits.length > 0) {
                const topFits = fits.slice(0, 7);
                const airportFits = topFits
                    .map(
                        (fit) =>
                            `<div class="airport-search__result">
                <div class="airport__id">
                <div class="airport__iata">${fit.iata_code}</div>
                <h3 class="airport__name">${fit.name}</h3>
                </div>
                <div class="airport__location">
                <p class="airport__city">${fit.city}</p> 
                </div>
            </div><hr>`
                    )
                    .join("");

                airportList.innerHTML = airportFits;
            }
        };

        // Departure search input and airport list
        const departureSearchInput = document.getElementById("departureSearch");
        const departureAirportList = document.getElementById("departureAirportList");
        const selectedDepartureAirport = document.getElementById("selectedDepartureAirport");

        departureSearchInput.addEventListener("input", () => searchAndPopulateAirport(departureSearchInput.value, departureAirportList, selectedDepartureAirport));

        departureAirportList.addEventListener("click", function(event) {
            const target = event.target.closest(".airport-search__result");
            if (target) {
                const iataCode = target.querySelector(".airport__iata").textContent;
                const airportName = target.querySelector(".airport__name").textContent;
                const airportCity = target.querySelector(".airport__city").textContent;

                departureSearchInput.value = iataCode;

                selectedDepartureAirport.textContent = `${airportName} - ${airportCity}`;

                departureAirportList.innerHTML = "";
            }
        });

        // Arrival search input and airport list
        const arrivalSearchInput = document.getElementById("arrivalSearch");
        const arrivalAirportList = document.getElementById("arrivalAirportList");
        const selectedArrivalAirport = document.getElementById("selectedArrivalAirport");

        arrivalSearchInput.addEventListener("input", () => searchAndPopulateAirport(arrivalSearchInput.value, arrivalAirportList, selectedArrivalAirport));

        arrivalAirportList.addEventListener("click", function(event) {
            const target = event.target.closest(".airport-search__result");
            if (target) {
                const iataCode = target.querySelector(".airport__iata").textContent;
                const airportName = target.querySelector(".airport__name").textContent;
                const airportCity = target.querySelector(".airport__city").textContent;

                arrivalSearchInput.value = iataCode;

                selectedArrivalAirport.textContent = `${airportName} - ${airportCity}`;

                arrivalAirportList.innerHTML = "";
            }
        });
    </script>
    {% endblock %}


    {% block js %}
        <script>
            // Get the journey_date_input and return_date_input values from Django context
            const journeyDateInput = '{{ journey_date_input }}';
            const returnDateInput = '{{ return_date_input }}';

            // Convert the date inputs to Date objects
            const journeyDate = new Date(journeyDateInput);
            const returnDate = new Date(returnDateInput);

            // Set initial values for date inputs
            $(".journey-date").val(journeyDate.toLocaleDateString());
            $(".return-date").val(returnDate.toLocaleDateString());

            // Set initial day names
            $(".journey-day-name").html(journeyDate.toLocaleString('en-us', { weekday: 'long' }));
            $(".return-day-name").html(returnDate.toLocaleString('en-us', { weekday: 'long' }));

            // Update day name when journey date changes
            $(".journey-date").change(function () {
                const ojd = $(this).val();
                const journeyDayName = new Date(ojd).toLocaleString('en-us', { weekday: 'long' });
                $(this).closest(".search-form-date").find(".journey-day-name").html(journeyDayName);
            });

            // Update day name when return date changes
            $(".return-date").change(function () {
                const rd = $(this).val();
                const returnDayName = new Date(rd).toLocaleString('en-us', { weekday: 'long' });
                $(this).closest(".search-form-date").find(".return-day-name").html(returnDayName);
            });
        </script>


        <script>
            airlineDict = {
                "UAI":"Union Africaine",
                "1A":"Amadeus IT Group",
                "AA": "American Airlines",
                "2G": "CargoItalia (alternate)",
                "CO": "Continental Airlines",
                "DL": "Delta Air Lines",
                "NW": "Northwest Airlines (alternate site)",
                "AC": "Air Canada",
                "UA": "United Airlines Cargo",
                "CP": "Canadian Airlines Int'l",
                "LH": "Lufthansa Cargo AG",
                "FX": "Fedex",
                "AS": "Alaska Airlines",
                "US": "USAirways",
                "RG": "VARIG Brazilian Airlines",
                "KA": "Dragonair",
                "LA": "LAN Chile",
                "TP": "TAP Air Portugal",
                "CY": "Cyprus Airways",
                "OA": "Olympic Airways",
                "EI": "Aer Lingus Cargo",
                "AZ": "Alitalia",
                "AF": "Air France",
                "IC": "Indian Airlines",
                "HM": "Air Seychelles",
                "OK": "Czech Airlines",
                "SV": "Saudi Arabian Airlines",
                "RB": "Syrian Arab Airlines",
                "ET": "Ethiopian Airlines",
                "GF": "Gulf Air",
                "KL": "KLM Cargo",
                "IB": "Iberia",
                "ME": "Middle East Airlines",
                "MS": "Egyptair",
                "PR": "Philippine Airlines",
                "LO": "LOT Polish Airlines",
                "QF": "Qantas Airways",
                "SN": "Brussels Airlines",
                "SA": "South African Airways",
                "NZ": "Air New Zealand",
                "IT": "Kingfisher Airlines",
                "KD": "KD Avia",
                "IR": "Iran Air",
                "AI": "Air India",
                "AY": "Finnair",
                "BW": "Caribbean Airlines",
                "FI": "Icelandair",
                "CK": "China Cargo Airlines",
                "LY": "EL AL",
                "JU": "JAT Airways",
                "SK": "SAS-Scandinavian Airlines System",
                "DT": "TAAG Angola Airlines",
                "LM": "Air ALM",
                "AH": "Air Algerie",
                "BA": "British Airways",
                "GA": "Garuda Indonesia",
                "MP": "Martinair Cargo",
                "JL": "Japan Airlines",
                "LR": "LACSA Airlines of Costa Rica",
                "AM": "Aeromexico Cargo",
                "LI": "LIAT Airlines",
                "AT": "Royal Air Maroc",
                "LN": "Libyan Airlines",
                "QR": "Qatar Airways",
                "CX": "Cathay Pacific Airways",
                "3V": "TNT Airways",
                "JP": "Adria Airways",
                "CV": "Cargolux Airlines",
                "EK": "Emirates",
                "KE": "Korean Air",
                "MA": "Malev Hungarian Airlines",
                "JI": "Jade Cargo International",
                "JM": "Air Jamaica",
                "TA": "TACA",
                "NH": "ANA All Nippon Cargo",
                "PK": "Pakistan Int'l Airlines",
                "TG": "Thai Airways",
                "KU": "Kuwait Airways",
                "CM": "Copa Airlines Cargo",
                "NG": "Lauda Air",
                "MH": "Malaysian Airline System",
                "JD": "Japan Air System",
                "TK": "Turkish Airlines",
                "BD": "British Midland Airways",
                "MK": "Air Mauritius",
                "OS": "Austrian Cargo",
                "MD": "Air Madagascar",
                "EF": "Far Eastern Air Transport",
                "LT": "LTU (Leisure Cargo)",
                "TL": "Trans Mediterranean Airways",
                "K4": "Kalitta Air",
                "LD": "Air Hong Kong",
                "CI": "China Airlines",
                "5S": "Global Aviation and Services",
                "OO": "Sky West Airlines",
                "WE": "Centurion Air Cargo",
                "SC": "Shandong Airlines (Chinese)",
                "RF": "Florida West International Airways",
                "NC": "Northern Air Cargo",
                "C8": "Cargolux Italia",
                "5Y": "Atlas Air",
                "KX": "Cayman Airways",
                "A3": "Aegean Airlines",
                "PO": "Polar Air Cargo",
                "JW": "Arrow Air",
                "5X": "UPS Air Cargo",
                "N8": "National Air Cargo",
                "S7": "Siberia Airlines",
                "ER": "DHL Aviation/DHL Airways",
                "KC": "Air Astana",
                "ZH": "Shenzhen Airlines (Chinese)",
                "SU": "Aeroflot",
                "RJ": "Royal Jordanian",
                "WN": "Southwest Airlines",
                "A2": "Cielos Airlines",
                "M3": "ABSA Aerolinhas Brasileiras",
                "M2": "Mario's Air",
                "XQ": "Sun Express",
                "PS": "Ukraine Int'l Airlines",
                "9U": "Air Moldova",
                "7C": "Coyne Airways",
                "RU": "AirBridge Cargo",
                "9W": "Jet Airways",
                "UL": "SriLankan Cargo",
                "UY": "Cameroon Airlines",
                "EY": "ETIHAD Airways",
                "QY": "DHL Aviation / European Air Transport",
                "SQ": "Singapore Airlines",
                "FB": "Bulgaria Air",
                "GL": "Air Greenland",
                "IY": "Yemenia Yemen Airways",
                "KM": "Air Malta",
                "PX": "Air Niugini",
                "BT": "Air Baltic",
                "BI": "Royal Brunei Airlines",
                "NX": "Air Macau",
                "BR": "Eva Airways",
                "5C": "CAL Cargo Air Lines",
                "KQ": "Kenya Airways",
                "MB": "MNG Airlines",
                "LX": "Swiss",
                "QT": "Tampa Airlines",
                "MF": "Xiamen Airlines",
                "SP": "SATA Air Acores",
                "VN": "Vietnam Airlines",
                "SM": "Avient",
                "J2": "Azerbaijan Airlines",
                "6E": "IndiGo Airlines",
                "SG": "SpiceJet Airlines",
                "FM": "Shanghai Airlines",
                "MU": "China Eastern Airlines",
                "CZ": "China Southern Airlines",
                "GD": "Grandstar Cargo",
                "AE": "Mandarin Airlines",
                "M6": "Amerijet International",
                "S6": "SAC South American Airways",
                "F4": "Shanghai Airlines Cargo",
                "OU": "Croatia Airlines",
                "N8": "Hong Kong Airlines",
                "FK": "Africa West",
                "EV": "Atlantic Southeast Airlines",
                "MY": "MASAir",
                "VV": "Aerosvit",
                "Y8": "Yangtze River Express Airlines",
                "6R": "AeroUnion",
                "3U": "Sichuan Airlines",
                "HU": "Hainan Airlines (Chinese)",
                "DE": "Condor Flugdienst",
                "OH": "Comair",
                "B1": "TAB Cargo",
                "QN": "Air Armenia",
                "UZ": "Buraq Air Transport (Arabic only)",
                "VS": "Virgin Atlantic",
                "KZ": "Nippon Cargo Airlines",
                "JJ": "TAM Brazilian Airlines",
                "7I": "Insel Air Cargo",
                "OV": "Estonian Air",
                "QO": "Aeromexpress Cargo",
                "OZ": "Asiana Airlines",
                "IJ": "Great Wall Airlines"
            }
            function setAirlineName(stockCodeElement, airlineNameElement) {
                const stockCode = stockCodeElement.textContent.trim();
                const airlineName = airlineDict[stockCode] || "Airline not found";
                airlineNameElement.textContent = airlineName;
            }
        
            // Loop through all flight data divs and set airline names
            const flightDataDivs = document.querySelectorAll('.flight-airline-name');
            flightDataDivs.forEach(flightDataDiv => {
                const stockCodeElement = flightDataDiv;
                const airlineNameElement = flightDataDiv;
                setAirlineName(stockCodeElement, airlineNameElement);
            });
        </script>



{% comment %} return flight select {% endcomment %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Get references to all the one-way radio buttons
        var oneWayRadioButtons = document.querySelectorAll('.Rone-way-radio');
        // Get references to all the return radio buttons
        console.log(oneWayRadioButtons)
        var returnRadioButtons = document.querySelectorAll('.Rreturn-radio');

        var bottomDiv = document.querySelector('.fixed-bottom-div');
    
        // Initialize variables to store one-way and return flight details
        var oneWayFlightDetails = null;
        var returnFlightDetails = null;

        // Add event listeners for one-way radio buttons
        oneWayRadioButtons.forEach(function (radioButtonO) {
            radioButtonO.addEventListener("change", function () {
                // Check if the one-way radio button is selected
                if (radioButtonO.checked) {
                    // Get the selected radio button's ID
                    var selectedRadioIdO = radioButtonO.id;
                    // Use the selectedRadioId to identify the corresponding flight details
                    oneWayFlightDetails = getOneWayFlightDetails(selectedRadioIdO);    
                    // Now you can do something with the oneWayFlightDetails, such as displaying them
                    displayFlightDetails(bottomDiv, oneWayFlightDetails, returnFlightDetails);
                    console.log(oneWayFlightDetails);
                }
            });
        });
    
        // Add event listeners for return radio buttons
        returnRadioButtons.forEach(function (radioButtonR) {
            radioButtonR.addEventListener("change", function () {
                // Check if the return radio button is selected
                if (radioButtonR.checked) {
                    // Get the selected radio button's ID
                    var selectedRadioIdR = radioButtonR.id;
                    // Use the selectedRadioId to identify the corresponding flight details
                    returnFlightDetails = getReturnFlightDetails(selectedRadioIdR);
    
                    // Now you can do something with the returnFlightDetails, such as displaying them
                    displayFlightDetails(bottomDiv, oneWayFlightDetails, returnFlightDetails);
                    console.log(returnFlightDetails);
                }
            });
        });
    
        // Function to get one-way flight details based on the selected radio button
        function getOneWayFlightDetails(selectedRadioIdO) {
            // Implement your logic here to extract one-way flight details based on the ID
            // For example, you can extract details from the DOM using the selectedRadioIdO
            var flightItemO = document.querySelector('#' + selectedRadioIdO).closest('.flight-booking-item');
            
            // Extract specific details from the flightItem element
            var BaseOrigin = flightItemO.querySelector('input[name="BaseOrigin"]').value;
            var BaseDestination = flightItemO.querySelector('input[name="BaseDestination"]').value;
            var TripType = flightItemO.querySelector('input[name="TripType"]').value;
            var AdultCount = flightItemO.querySelector('input[name="AdultCount"]').value;
            var children = flightItemO.querySelector('input[name="children"]').value;
            var infant = flightItemO.querySelector('input[name="infant"]').value;
            var Trackid = flightItemO.querySelector('input[name="Trackid"]').value;

            var FlightID = flightItemO.querySelector('input[name="FlightID"]').value;
            var FlightNumber = flightItemO.querySelector('input[name="FlightNumber"]').value;
            var Origin = flightItemO.querySelector('input[name="Origin"]').value;
            var Destination = flightItemO.querySelector('input[name="Destination"]').value;
            var DepartureDateTime = flightItemO.querySelector('input[name="DepartureDateTime"]').value;
            var ArrivalDateTime = flightItemO.querySelector('input[name="ArrivalDateTime"]').value;
                        //1stop
            var FlightID1 = (flightItemO.querySelector('input[name="FlightID1"]')?.value || "").trim();
            var FlightNumber1 = (flightItemO.querySelector('input[name="FlightNumber1"]')?.value || "").trim();
            var Origin1 = (flightItemO.querySelector('input[name="Origin1"]')?.value || "").trim();
            var Destination1 = (flightItemO.querySelector('input[name="Destination1"]')?.value || "").trim();
            var DepartureDateTime1 = (flightItemO.querySelector('input[name="DepartureDateTime1"]')?.value || "").trim();
            var ArrivalDateTime1 = (flightItemO.querySelector('input[name="ArrivalDateTime1"]')?.value || "").trim();

            var adultBaseAmount = flightItemO.querySelector('input[name="adultBaseAmount"]').value;
            var adultTotalTaxAmount = flightItemO.querySelector('input[name="adultTotalTaxAmount"]').value;
            var childBaseAmount = (flightItemO.querySelector('input[name="childBaseAmount"]')?.value || "0").trim();
            var childTotalTaxAmount = (flightItemO.querySelector('input[name="childTotalTaxAmount"]')?.value || "0").trim();
            var infantBaseAmount = (flightItemO.querySelector('input[name="infantBaseAmount"]')?.value || "0").trim();
            var infantTotalTaxAmount = (flightItemO.querySelector('input[name="infantTotalTaxAmount"]')?.value || "0").trim();
            console.log(typeof(adultBaseAmount))
            var Stops = flightItemO.querySelector('input[name="Stops"]').value;

            // Return the one-way flight details as an object
            return {
                BaseOrigin: BaseOrigin,
                BaseDestination: BaseDestination,
                TripType: TripType,
                AdultCount: AdultCount,
                children: children,
                infant: infant,
                Trackid: Trackid,

                FlightID: FlightID,
                FlightNumber: FlightNumber,
                Origin: Origin,
                Destination: Destination,
                DepartureDateTime: DepartureDateTime,
                ArrivalDateTime: ArrivalDateTime,
                Stops: Stops,

                FlightID1: FlightID1,
                FlightNumber1: FlightNumber1,
                Origin1: Origin1,
                Destination1: Destination1,
                DepartureDateTime1: DepartureDateTime1,
                ArrivalDateTime1: ArrivalDateTime1,

                adultBaseAmount:adultBaseAmount,
                adultTotalTaxAmount:adultTotalTaxAmount,
                childBaseAmount:childBaseAmount,
                childTotalTaxAmount:childTotalTaxAmount,
                infantBaseAmount:infantBaseAmount,
                infantTotalTaxAmount:infantTotalTaxAmount,
            };
        }
    
        // Function to get return flight details based on the selected radio button
        function getReturnFlightDetails(selectedRadioIdR) {
            // Implement your logic here to extract return flight details based on the ID
            // For example, you can extract details from the DOM using the selectedRadioIdR
            var flightItemR = document.querySelector('#' + selectedRadioIdR).closest('.flight-booking-item');
            
            // Extract specific details from the flightItem element
            var BaseOrigin = flightItemR.querySelector('input[name="BaseOrigin"]').value;
            var BaseDestination = flightItemR.querySelector('input[name="BaseDestination"]').value;
            var TripType = flightItemR.querySelector('input[name="TripType"]').value;
            var AdultCount = flightItemR.querySelector('input[name="AdultCount"]').value;
            var children = flightItemR.querySelector('input[name="children"]').value;
            var infant = flightItemR.querySelector('input[name="infant"]').value;
            var Trackid = flightItemR.querySelector('input[name="Trackid"]').value;

            var FlightID = flightItemR.querySelector('input[name="FlightID"]').value;
            var FlightNumber = flightItemR.querySelector('input[name="FlightNumber"]').value;
            var Origin = flightItemR.querySelector('input[name="Origin"]').value;
            var Destination = flightItemR.querySelector('input[name="Destination"]').value;
            var DepartureDateTime = flightItemR.querySelector('input[name="DepartureDateTime"]').value;
            var ArrivalDateTime = flightItemR.querySelector('input[name="ArrivalDateTime"]').value;
                        //1stop
            var FlightID1 = (flightItemR.querySelector('input[name="FlightID1"]')?.value || "").trim();
            var FlightNumber1 = (flightItemR.querySelector('input[name="FlightNumber1"]')?.value || "").trim();
            var Origin1 = (flightItemR.querySelector('input[name="Origin1"]')?.value || "").trim();
            var Destination1 = (flightItemR.querySelector('input[name="Destination1"]')?.value || "").trim();
            var DepartureDateTime1 = (flightItemR.querySelector('input[name="DepartureDateTime1"]')?.value || "").trim();
            var ArrivalDateTime1 = (flightItemR.querySelector('input[name="ArrivalDateTime1"]')?.value || "").trim();

            var adultBaseAmount = flightItemR.querySelector('input[name="adultBaseAmount"]').value;
            var adultTotalTaxAmount = flightItemR.querySelector('input[name="adultTotalTaxAmount"]').value;
            var childBaseAmount = (flightItemR.querySelector('input[name="childBaseAmount"]')?.value || "0").trim();
            var childTotalTaxAmount = (flightItemR.querySelector('input[name="childTotalTaxAmount"]')?.value || "0").trim();
            var infantBaseAmount = (flightItemR.querySelector('input[name="infantBaseAmount"]')?.value || "0").trim();
            var infantTotalTaxAmount = (flightItemR.querySelector('input[name="infantTotalTaxAmount"]')?.value || "0").trim();

            var Stops = flightItemR.querySelector('input[name="Stops"]').value;
            
            // Return the return flight details as an object
            return {
                BaseOrigin: BaseOrigin,
                BaseDestination: BaseDestination,
                TripType: TripType,
                AdultCount: AdultCount,
                children: children,
                infant: infant,
                Trackid: Trackid,

                FlightID: FlightID,
                FlightNumber: FlightNumber,
                Origin: Origin,
                Destination: Destination,
                DepartureDateTime: DepartureDateTime,
                ArrivalDateTime: ArrivalDateTime,
                Stops:Stops,

                FlightID1: FlightID1,
                FlightNumber1: FlightNumber1,
                Origin1: Origin1,
                Destination1: Destination1,
                DepartureDateTime1: DepartureDateTime1,
                ArrivalDateTime1: ArrivalDateTime1,

                adultBaseAmount:adultBaseAmount,
                adultTotalTaxAmount:adultTotalTaxAmount,
                childBaseAmount:childBaseAmount,
                childTotalTaxAmount:childTotalTaxAmount,
                infantBaseAmount:infantBaseAmount,
                infantTotalTaxAmount:infantTotalTaxAmount,
            };
        }
    
        // Function to display flight details in the fixed-bottom-div
        function displayFlightDetails(divElement, oneWayDetails, returnDetails) {
            // Create HTML content to display the flight details
            var total_price = parseFloat(oneWayDetails.adultBaseAmount) + parseFloat(returnDetails.adultBaseAmount)
            console.log(total_price)
            var htmlContent = `
            <div class="flex">
                <div class="onewayR">
                    <input type="hidden" name="BaseOrigin" value="${oneWayDetails.BaseOrigin}">
                    <input type="hidden" name="BaseDestination" value="${oneWayDetails.BaseDestination}">
                    <input type="hidden" name="TripType" value="${oneWayDetails.TripType}">
                    <input type="hidden" name="AdultCount" value="${oneWayDetails.AdultCount}">
                    <input type="hidden" name="children" value="${oneWayDetails.children}">
                    <input type="hidden" name="infant" value="${oneWayDetails.infant}">
                    <input type="hidden" name="Trackid" value="${oneWayDetails.Trackid}">
                    
                    <input type="hidden" name="FlightID" value="${oneWayDetails.FlightID}">
                    <input type="hidden" name="FlightNumber" value="${oneWayDetails.FlightNumber}">
                    <input type="hidden" name="Origin" value="${oneWayDetails.Origin}">
                    <input type="hidden" name="Destination" value="${oneWayDetails.Destination}">
                    <input type="hidden" name="DepartureDateTime" value="${oneWayDetails.DepartureDateTime}">
                    <input type="hidden" name="ArrivalDateTime" value="${oneWayDetails.ArrivalDateTime}">
                    <input type="hidden" name="Stops" value="${oneWayDetails.Stops}">

                    <input type="hidden" name="FlightID1" value="${oneWayDetails.FlightID1}">
                    <input type="hidden" name="FlightNumber1" value="${oneWayDetails.FlightNumber1}">
                    <input type="hidden" name="Origin1" value="${oneWayDetails.Origin1}">
                    <input type="hidden" name="Destination1" value="${oneWayDetails.Destination1}">
                    <input type="hidden" name="DepartureDateTime1" value="${oneWayDetails.DepartureDateTime1}">
                    <input type="hidden" name="ArrivalDateTime1" value="${oneWayDetails.ArrivalDateTime1}">

                    <input type="hidden" name="adultBaseAmount" value="${oneWayDetails.adultBaseAmount}">
                    <input type="hidden" name="adultTotalTaxAmount" value="${oneWayDetails.adultTotalTaxAmount}">
                    <input type="hidden" name="childBaseAmount" value="${oneWayDetails.childBaseAmount}">
                    <input type="hidden" name="childTotalTaxAmount" value="${oneWayDetails.childTotalTaxAmount}">
                    <input type="hidden" name="infantBaseAmount" value="${oneWayDetails.infantBaseAmount}">
                    <input type="hidden" name="infantTotalTaxAmount" value="${oneWayDetails.infantTotalTaxAmount}">
                    
                    <span>From: ${oneWayDetails.BaseOrigin}</span>
                    <span>To: ${oneWayDetails.BaseDestination}</span>
        
                </div>

                
                <div class="returnR">
                    <input type="hidden" name="RBaseOrigin" value="${returnDetails.BaseOrigin}">
                    <input type="hidden" name="RBaseDestination" value="${returnDetails.BaseDestination}">
                    
                    <input type="hidden" name="RFlightID" value="${returnDetails.FlightID}">
                    <input type="hidden" name="RFlightNumber" value="${returnDetails.FlightNumber}">
                    <input type="hidden" name="ROrigin" value="${returnDetails.Origin}">
                    <input type="hidden" name="RDestination" value="${returnDetails.Destination}">
                    <input type="hidden" name="RDepartureDateTime" value="${returnDetails.DepartureDateTime}">
                    <input type="hidden" name="RArrivalDateTime" value="${returnDetails.ArrivalDateTime}">
                    <input type="hidden" name="RStops" value="${returnDetails.Stops}">

                    <input type="hidden" name="RFlightID1" value="${returnDetails.FlightID1}">
                    <input type="hidden" name="RFlightNumber1" value="${returnDetails.FlightNumber1}">
                    <input type="hidden" name="ROrigin1" value="${returnDetails.Origin1}">
                    <input type="hidden" name="RDestination1" value="${returnDetails.Destination1}">
                    <input type="hidden" name="RDepartureDateTime1" value="${returnDetails.DepartureDateTime1}">
                    <input type="hidden" name="RArrivalDateTime1" value="${returnDetails.ArrivalDateTime1}">

                    <input type="hidden" name="RadultBaseAmount" value="${returnDetails.adultBaseAmount}">
                    <input type="hidden" name="RadultTotalTaxAmount" value="${returnDetails.adultTotalTaxAmount}">
                    <input type="hidden" name="RchildBaseAmount" value="${returnDetails.childBaseAmount}">
                    <input type="hidden" name="RchildTotalTaxAmount" value="${returnDetails.childTotalTaxAmount}">
                    <input type="hidden" name="RinfantBaseAmount" value="${returnDetails.infantBaseAmount}">
                    <input type="hidden" name="RinfantTotalTaxAmount" value="${returnDetails.infantTotalTaxAmount}">

                    <span>From: ${returnDetails.BaseOrigin}</span>
                    <span>To: ${returnDetails.BaseDestination}</span>
                </div>
                <div>
                    <span>${total_price}</span>
                    <button>Book Now</button>
                </div>
                
                
            </div>
            `;
    
            // Set the HTML content of the fixed-bottom-div
            divElement.innerHTML = htmlContent;
        }
    });
</script>


<script>
    function showLoader() {
        document.getElementById("loader-container").style.display = "block";
    }
    function hideLoader() {
        document.getElementById("loader-container").style.display = "none";
    }
    const forms = document.querySelectorAll("form");
    forms.forEach(form => {
        form.addEventListener("submit", showLoader);
    });
    window.onload = function() {
        hideLoader();
    };
</script>
    


<script>
    // Add JavaScript code to scroll to the desired section on page load
    window.addEventListener('DOMContentLoaded', function () {
        const containerSection = document.querySelector('#scroll');
        if (containerSection) {
            containerSection.scrollIntoView({ behavior: 'smooth' });
        }
    });
</script>


<script>
    // Function to scroll to the target div
    function scrollToTarget() {
        const targetDiv = document.getElementById('targetDiv');
        targetDiv.scrollIntoView({ behavior: 'smooth' });
    }

    // Add a click event listener to the button
    document.getElementById('scrollButton').addEventListener('click', scrollToTarget);
</script>


{% comment %} //price {% endcomment %}
  
<script>
    function getAllPrices() {
        var prices = [];
        $(".price-amount").each(function () {
            var priceText = $(this).text().replace('â‚¹', '').replace(',', ''); // Remove currency symbol and commas
            var priceValue = parseFloat(priceText); // Convert to float
            prices.push(priceValue);
        });
        return prices;
    }

    function filterFlightsByPrice(minPrice, maxPrice) {
        $(".flight-booking-item").each(function () {
            var flightPriceText = $(this).find(".price-amount").text();
            var flightPrice = parseFloat(flightPriceText.replace('â‚¹', '').replace(',', ''));
            
            if (flightPrice >= minPrice && flightPrice <= maxPrice) {
                $(this).show();
            } else {
                $(this).hide();
            }
        });
    }

    $(function () {
        var prices = getAllPrices();
        var minPrice = Math.min(...prices);
        var maxPrice = Math.max(...prices);

        // Price slider
        $(".price-range").slider({
            step: 1,
            range: true,
            min: minPrice,
            max: maxPrice,
            values: [minPrice, maxPrice],
            slide: function (event, ui) {
                $(".priceRange").val(
                    "â‚¹" + ui.values[0].toLocaleString() + " - â‚¹" + ui.values[1].toLocaleString()
                );

                // Filter flights by price range
                filterFlightsByPrice(ui.values[0], ui.values[1]);
            }
        });

        $(".priceRange").val(
            "â‚¹" +
            $(".price-range").slider("values", 0).toLocaleString() +
            " - â‚¹" +
            $(".price-range").slider("values", 1).toLocaleString()
        );
    });
</script>



{% comment %} // Stops {% endcomment %}
<script>
    const checkbox1 = document.getElementById('flight-stop1');
    const checkbox2 = document.getElementById('flight-stop2');
    const flightItems = document.querySelectorAll('.flight-booking-item');

    checkbox1.addEventListener('change', filterFlights);
    checkbox2.addEventListener('change', filterFlights);

    filterFlights();

    function filterFlights() {
        const isChecked1 = checkbox1.checked;
        const isChecked2 = checkbox2.checked;

        flightItems.forEach((flightItem) => {
            const stops = flightItem.querySelector('.filterstp').getAttribute('data-stops');
            if ((isChecked1 && stops === '0') || (isChecked2 && stops === '1') || (!isChecked1 && !isChecked2)) {
                flightItem.style.display = 'block';
            } else {
                flightItem.style.display = 'none';
            }
        });
    }

</script>


{% comment %} // Airlines {% endcomment %}
<script>
    // Function to fetch unique flight names
    function getUniqueFlightNames() {
        const flightNames = Array.from(document.querySelectorAll('.flight-airline-name'));
        const uniqueFlightNames = Array.from(new Set(flightNames.map(name => name.textContent.trim())));
        return uniqueFlightNames;
    }
    function createCheckboxes() {
        const uniqueFlightNames = getUniqueFlightNames();
        const checkboxContainer = document.getElementById('checkbox-container');

        checkboxContainer.innerHTML = '';

        uniqueFlightNames.forEach((name, index) => {
            const checkboxId = `flight-airline${index + 1}`;
            const label = `${name}`; 

            const checkboxHtml = `
                <div class="form-check">
                    <input class="form-check-input flight-airline-check" name="flight-airline" type="checkbox" value="${label}" id="${checkboxId}">
                    <label class="form-check-label" for="${checkboxId}">
                        ${label}
                    </label>
                </div>
            `;
            checkboxContainer.innerHTML += checkboxHtml;
        });
    }
    document.addEventListener('DOMContentLoaded', createCheckboxes);
</script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const checkboxes = document.querySelectorAll('.flight-airline-check');
        const flightItems = document.querySelectorAll('.flight-booking-item');

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                const selectedAirlineNames = Array.from(checkboxes)
                    .filter(checkbox => checkbox.checked)
                    .map(checkbox => checkbox.value);

                flightItems.forEach(item => {
                    const flightName = item.querySelector('.flight-airline-name').textContent;
                    const shouldDisplay = selectedAirlineNames.length === 0 || selectedAirlineNames.includes(flightName);
                    item.style.display = shouldDisplay ? 'block' : 'none';
                });
            });
        });
    });
</script>




{% endblock %}